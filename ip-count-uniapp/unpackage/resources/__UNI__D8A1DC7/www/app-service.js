if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";var t=(e,t)=>{const a=e.__vccOpts||e;for(const[i,s]of t)a[i]=s;return a};var a=t({data:()=>({userInfo:{},globalOption:{},globalData:{},userNameFocus:!1,userName:"",passwordFocus:!1,password:"",checkCodeFocus:!1,checkCode:"",checkImg:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){this.CheckImgApi()},CheckImgApi(e){let t=Date.now();this.$http.get(`http://127.0.0.1:9999/utils/checkCode?time=${t}`).then((e=>{this.checkImg=e.base64Img}))},loginApi(e){if(!/^\d{5,12}@[qQ][qQ]\.(com|cn)$/.test(this.userName))return void uni.showToast({title:"请输入正确QQ邮箱!",icon:"error",duration:1500});if(!/^\w{6,12}$/.test(this.password))return void uni.showToast({title:"密码长度在6-12之间!",icon:"error",duration:1500});/^\w{4}$/.test(this.checkCode)?(this.$http.post("http://127.0.0.1:9999/user/login",{userName:this.userName,password:this.password,checkCode:this.checkCode},{"Content-type":"application/json",sign:"4503fcdaae0b69bbd9c98b3d5e301ef7"}).then((e=>{0===e.code?(uni.showToast({title:"登录成功!",icon:"success",duration:1e3}),uni.setStorageSync("token",e.data.token)):uni.showToast({title:e.msg,icon:"error",duration:1500})})),this.CheckImgApi()):uni.showToast({title:"请输入正确验证码!",icon:"error",duration:1500})}}},[["render",function(t,a,i,s,r,o){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex3-clz"},[e.createElementVNode("view",{class:"flex diygw-col-24"},[e.createElementVNode("view",{class:"diygw-tag margin-xs md radius",onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null"},[e.createElementVNode("text",{class:"diygw-icon diy-icon-back_android"}),e.createElementVNode("text",null," 返回 ")])])]),e.createElementVNode("view",{class:"flex diygw-col-24 flex-direction-column justify-center items-center flex-nowrap flex-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 avatar-clz"},[e.createElementVNode("view",{class:"diygw-avatar lg radius diygw-shadow bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/wxtp_20220821195123.png"})])])]),e.createElementVNode("view",{class:"diygw-col-24 logintitle-clz diygw-text-lg text-purple"}," 登录页面 "),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 userName-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.userNameFocus,name:"userName","comfirm-type":"done",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.userName=e),placeholder:"请输入QQ邮箱"},null,8,["focus"]),[[e.vModelText,r.userName]])])]),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 password-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.passwordFocus,name:"password","comfirm-type":"done",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.password=e),placeholder:"请输入密码"},null,8,["focus"]),[[e.vModelText,r.password]])])]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex4-clz"},[e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-15 checkCode-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.checkCodeFocus,name:"checkCode","comfirm-type":"done",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.checkCode=e),placeholder:"请输入验证码"},null,8,["focus"]),[[e.vModelText,r.checkCode]])])]),e.createElementVNode("image",{src:r.checkImg,onClick:a[4]||(a[4]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"CheckImgApi",class:"diygw-image diygw-col-0 checkImg-clz",style:{height:"45px !important",width:"135px"},mode:"widthFix"},null,8,["src"])]),e.createElementVNode("view",{class:"flex diygw-col-24 button-clz"},[e.createElementVNode("button",{onClick:a[5]||(a[5]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"loginApi",class:"diygw-btn gradual-purple md radius flex-sub margin-xs button-button-clz"},"点击登录")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between flex1-clz"},[e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/register",class:"diygw-col-0 text-clz text-purple"}," 注册账号 "),e.createElementVNode("view",{onClick:a[7]||(a[7]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/resetPassword",class:"diygw-col-0 text1-clz text-purple"}," 忘记密码 ")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-center items-center flex2-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 line-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})]),e.createElementVNode("view",{class:"diygw-col-0 text2-clz text-grey"}," 第三方授权登录 "),e.createElementVNode("view",{class:"flex diygw-col-0 line1-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})])]),e.createElementVNode("view",{class:"flex diygw-col-24 justify-center"},[e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_weixin.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_wb.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_QQ.png"})])]),e.createElementVNode("view",{class:"flex diygw-col-24 diygw-bottom"},[e.createElementVNode("view",{class:"diygw-grid diygw-actions"},[e.createElementVNode("button",{onClick:a[8]||(a[8]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 首页 ")])]),e.createElementVNode("button",{onClick:a[9]||(a[9]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 个人中心 ")])])])]),e.createElementVNode("view",{class:"version text-grey flex-direction-column flex diygw-col-24 justify-center align-center"},[e.createElementVNode("view",null," DIY官网提供技术支持 "),e.createElementVNode("view",null," http://www.diygw.com ")]),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-411e98cb"]]);var i=t({data:()=>({userInfo:{},globalOption:{},globalData:{},userNameFocus:!1,userName:"",passwordFocus:!1,password:"",checkCodeFocus:!1,checkCode:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){}}},[["render",function(t,a,i,s,r,o){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex3-clz"},[e.createElementVNode("view",{class:"flex diygw-col-24"},[e.createElementVNode("view",{class:"diygw-tag margin-xs md radius",onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null"},[e.createElementVNode("text",{class:"diygw-icon diy-icon-back_android"}),e.createElementVNode("text",null," 返回 ")])])]),e.createElementVNode("view",{class:"flex diygw-col-24 flex-direction-column justify-center items-center flex-nowrap flex-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 avatar-clz"},[e.createElementVNode("view",{class:"diygw-avatar lg radius diygw-shadow bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/wxtp_20220821195123.png"})])])]),e.createElementVNode("view",{class:"diygw-col-24 logintitle-clz diygw-text-lg text-purple"}," 注册页面 "),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 userName-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.userNameFocus,name:"userName","comfirm-type":"done",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.userName=e),placeholder:"请输入邮箱"},null,8,["focus"]),[[e.vModelText,r.userName]])])]),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 password-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.passwordFocus,name:"password","comfirm-type":"done",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.password=e),placeholder:"请输入密码"},null,8,["focus"]),[[e.vModelText,r.password]])])]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex4-clz"},[e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-15 checkCode-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.checkCodeFocus,name:"checkCode","comfirm-type":"done",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.checkCode=e),placeholder:"请输入QQ验证码"},null,8,["focus"]),[[e.vModelText,r.checkCode]])])]),e.createElementVNode("view",{class:"flex diygw-col-9 button1-clz"},[e.createElementVNode("button",{class:"diygw-btn gradual-purple md radius margin-xs button1-button-clz"},"发送验证码")])]),e.createElementVNode("view",{class:"flex diygw-col-24 button-clz"},[e.createElementVNode("button",{onClick:a[4]||(a[4]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-btn gradual-purple md radius flex-sub margin-xs button-button-clz"},"点击注册")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between flex1-clz"},[e.createElementVNode("view",{onClick:a[5]||(a[5]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/login",class:"diygw-col-0 text-clz text-purple"}," 登录账号 "),e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/resetPassword",class:"diygw-col-0 text1-clz text-purple"}," 忘记密码 ")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-center items-center flex2-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 line-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})]),e.createElementVNode("view",{class:"diygw-col-0 text2-clz text-grey"}," 第三方授权登录 "),e.createElementVNode("view",{class:"flex diygw-col-0 line1-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})])]),e.createElementVNode("view",{class:"flex diygw-col-24 justify-center"},[e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_weixin.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_wb.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_QQ.png"})])]),e.createElementVNode("view",{class:"flex diygw-col-24 diygw-bottom"},[e.createElementVNode("view",{class:"diygw-grid diygw-actions"},[e.createElementVNode("button",{onClick:a[7]||(a[7]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 首页 ")])]),e.createElementVNode("button",{onClick:a[8]||(a[8]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 个人中心 ")])])])]),e.createElementVNode("view",{class:"version text-grey flex-direction-column flex diygw-col-24 justify-center align-center"},[e.createElementVNode("view",null," DIY官网提供技术支持 "),e.createElementVNode("view",null," http://www.diygw.com ")]),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-569cd39d"]]);var s=t({data:()=>({userInfo:{},globalOption:{},globalData:{},userNameFocus:!1,userName:"",passwordFocus:!1,password:"",checkCodeFocus:!1,checkCode:""}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){}}},[["render",function(t,a,i,s,r,o){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex-direction-column flex3-clz"},[e.createElementVNode("view",{class:"flex diygw-col-24"},[e.createElementVNode("view",{class:"diygw-tag margin-xs md radius",onClick:a[0]||(a[0]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null"},[e.createElementVNode("text",{class:"diygw-icon diy-icon-back_android"}),e.createElementVNode("text",null," 返回 ")])])]),e.createElementVNode("view",{class:"flex diygw-col-24 flex-direction-column justify-center items-center flex-nowrap flex-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 avatar-clz"},[e.createElementVNode("view",{class:"diygw-avatar lg radius diygw-shadow bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/wxtp_20220821195123.png"})])])]),e.createElementVNode("view",{class:"diygw-col-24 logintitle-clz diygw-text-lg text-purple"}," 重置密码 "),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 userName-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.userNameFocus,name:"userName","comfirm-type":"done",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.userName=e),placeholder:"请输入QQ邮箱"},null,8,["focus"]),[[e.vModelText,r.userName]])])]),e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-24 password-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.passwordFocus,name:"password","comfirm-type":"done",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.password=e),placeholder:"请输入新密码"},null,8,["focus"]),[[e.vModelText,r.password]])])]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 flex4-clz"},[e.createElementVNode("view",{class:"diygw-form-item diygw-form-item-small diygw-col-15 checkCode-clz"},[e.createElementVNode("view",{class:"input"},[e.createElementVNode("text",{class:"diy-icon-my",style:{color:"#304ffe"}}),e.withDirectives(e.createElementVNode("input",{class:"flex1",focus:r.checkCodeFocus,name:"checkCode","comfirm-type":"done",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.checkCode=e),placeholder:"请输入验证码"},null,8,["focus"]),[[e.vModelText,r.checkCode]])])]),e.createElementVNode("view",{class:"flex diygw-col-9 button1-clz"},[e.createElementVNode("button",{class:"diygw-btn gradual-purple md radius margin-xs button1-button-clz"},"发送验证码")])]),e.createElementVNode("view",{class:"flex diygw-col-24 button-clz"},[e.createElementVNode("button",{onClick:a[4]||(a[4]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-btn gradual-purple md radius flex-sub margin-xs button-button-clz"},"点击修改")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-between flex1-clz"},[e.createElementVNode("view",{onClick:a[5]||(a[5]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/login",class:"diygw-col-0 text-clz text-purple"}," 登录账号 "),e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/register",class:"diygw-col-0 text1-clz text-purple"}," 注册账户 ")]),e.createElementVNode("view",{class:"flex flex-wrap diygw-col-24 justify-center items-center flex2-clz"},[e.createElementVNode("view",{class:"flex diygw-col-0 line-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})]),e.createElementVNode("view",{class:"diygw-col-0 text2-clz text-grey"}," 第三方授权登录 "),e.createElementVNode("view",{class:"flex diygw-col-0 line1-clz"},[e.createElementVNode("view",{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})])]),e.createElementVNode("view",{class:"flex diygw-col-24 justify-center"},[e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_weixin.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_wb.png"})]),e.createElementVNode("view",{class:"diygw-avatar md margin-md radius bg-none"},[e.createElementVNode("image",{mode:"aspectFit",class:"diygw-avatar-img radius",src:"/static/icon2_QQ.png"})])]),e.createElementVNode("view",{class:"flex diygw-col-24 diygw-bottom"},[e.createElementVNode("view",{class:"diygw-grid diygw-actions"},[e.createElementVNode("button",{onClick:a[7]||(a[7]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 首页 ")])]),e.createElementVNode("button",{onClick:a[8]||(a[8]=(...e)=>t.navigateTo&&t.navigateTo(...e)),"data-type":"page","data-url":"/pages/null",class:"diygw-action"},[e.createElementVNode("view",{class:"diygw-grid-inner"},[e.createElementVNode("view",{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),e.createElementVNode("view",{class:"diygw-grid-title"}," 个人中心 ")])])])]),e.createElementVNode("view",{class:"version text-grey flex-direction-column flex diygw-col-24 justify-center align-center"},[e.createElementVNode("view",null," DIY官网提供技术支持 "),e.createElementVNode("view",null," http://www.diygw.com ")]),e.createElementVNode("view",{class:"clearfix"})])}],["__scopeId","data-v-5ac88ec7"]]);var r=t({data:()=>({url:""}),onLoad(e){e&&e.url&&(this.url=decodeURIComponent(e.url))},onShow(){},onShareAppMessage:function(){}},[["render",function(t,a,i,s,r,o){return e.openBlock(),e.createElementBlock("view",{class:"start"},[e.createElementVNode("web-view",{src:r.url},null,8,["src"])])}]]);__definePage("pages/login",a),__definePage("pages/register",i),__definePage("pages/resetPassword",s),__definePage("pages/webview",r);const o={globalData:{userInfo:null,tabBar:[],homePage:"/pages/login",pages:["/pages/login","/pages/register","/pages/resetPassword"]}};function n(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}class l{constructor(e={}){Object.assign(this,{rules:e}),this.__init()}__init(){this.__initMethods(),this.__initDefaults(),this.__initData()}__initDefaults(){this.defaults={messages:{required:"这是必填字段。",email:"请输入有效的电子邮件地址。",tel:"请输入11位的手机号码。",url:"请输入有效的网址。",date:"请输入有效的日期。",dateISO:"请输入有效的日期（ISO），例如：2009-06-23，1998/01/22。",number:"请输入有效的数字。",regexp:"请输入有效的正则匹配值。",digits:"只能输入数字。",idcard:"请输入18位的有效身份证。",equalTo:"输入值必须和%s相同。",contains:"输入值必须包含%s。",minlength:"最少要输入%s个字符。",maxlength:"最多可以输入%s个字符。",rangelength:"请输入长度在%s到%s之间的字符。",min:"请输入不小于%s的数值。",max:"请输入不大于%s的数值。",range:"请输入范围在%s到 {1} 之间的数值。"}}}__initData(){this.form={},this.errorList=[]}__initMethods(){const e=this;e.methods={required:{valid(t,a){if(!e.depend(a))return"dependency-mismatch";if("number"==typeof t)t=t.toString();else if("boolean"==typeof t)return!0;return t.length>0},message:e=>e.message||"这是必填字段。"},email:{valid:(t,a)=>e.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t),message:e=>e.message||"请输入有效的电子邮件地址。"},tel:{valid:(t,a)=>e.optional(t)||/^1[34578]\d{9}$/.test(t),message:e=>e.message||"请输入11位的手机号码。"},url:{valid:(t,a)=>e.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t),message:e=>e.message||"请输入有效的网址。"},date:{valid:(t,a)=>e.optional(t)||!/Invalid|NaN/.test(new Date(t).toString()),message:e=>e.message||"请输入有效的日期。"},dateISO:{valid:(t,a)=>e.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t),message:e=>e.message||"请输入有效的日期（ISO），例如：2009-06-23，1998/01/22。"},number:{valid:(t,a)=>e.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t),message:e=>e.message||"请输入有效的数字。"},digits:{valid:(t,a)=>e.optional(t)||/^\d+$/.test(t),message:e=>e.message||"只能输入整数。"},idcard:{valid:(t,a)=>e.optional(t)||/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t),message:e=>e.message||"请输入18位的有效身份证。"},regexp:{valid(t,a){var i="string"==typeof a.regexp?new RegExp(a.regexp):a.regexp;return e.optional(t)||i.test(t)},message:e=>e.message||"请输入有效的正则匹配值"},equalTo:{valid:(t,a)=>e.optional(t)||t===e.scope.detail.value[a.field],message:t=>e.formatMessage(t.message||"输入值必须和%s相同。",[e.scope.detail.value[t.field]])},contains:{valid:(t,a)=>e.optional(t)||t.indexOf(a.value)>=0,message:t=>e.formatMessage(t.message||"输入值必须包含%s。",[t.value])},minlength:{valid:(t,a)=>e.optional(t)||t.length>=a.value,message:t=>e.formatMessage(t.message||"最少要输入%s个字符。",[t.value])},maxlength:{valid:(t,a)=>e.optional(t)||t.length<=a.value,message:t=>e.formatMessage(t.message||"最多可以输入%s个字符。",[t.value])},rangelength:{valid:(t,a)=>e.optional(t)||t.length>=a.min&&t.length<=a.max,message:t=>e.formatMessage(t.message||"请输入长度在%s到%s之间的字符。",[t.min,t.max])},min:{valid:(t,a)=>e.optional(t)||t>=a.value,message:t=>e.formatMessage(t.message||"请输入不小于%s的数值。",[t.value])},max:{valid:(t,a)=>e.optional(t)||t<=a.value,message:t=>e.formatMessage(t.message||"请输入不大于%s的数值。",[t.value])},range:{valid:(t,a)=>e.optional(t)||t>=a.min&&t<=a.max,message:t=>e.formatMessage(t.message||"请输入范围在%s到%s之间的数值。",[t.min,t.max])}}}addMethod(e,t,a){this.methods[e]=t,this.defaults.messages[e]=void 0!==a?a:this.defaults.messages[e]}isValidMethod(e){return this.methods.hasOwnProperty(e)}formatMessage(e,t){for(var a in Array.isArray(t)||(t=[t]),t)e=e.replace("%s",t[a]);return e}formatTpl(e,t){const a=this;return 1===arguments.length?function(){let t=Array.from(arguments);return t.unshift(e),a.formatTpl.apply(this,t)}:(void 0===t||(arguments.length>2&&t.constructor!==Array&&(t=Array.from(arguments).slice(1)),t.constructor!==Array&&(t=[t]),t.forEach((function(t,a){e=e.replace(new RegExp("\\{"+a+"\\}","g"),(function(){return t}))}))),e)}depend(e){switch(typeof e){case"boolean":break;case"string":e=!!e.length;break;case"function":e=e();default:e=!0}return e}optional(e){return!this.methods.required.valid(e)&&"dependency-mismatch"}customMessage(e,t){return t.parameters.message||(t.parameters.message=this.defaults.messages[t.method]),t.parameters.message.indexOf("%s")>=0?this.methods[t.method].message:t.parameters.message}defaultMessage(e,t){let a=this.customMessage(e,t)||this.defaults.messages[t.method],i=typeof a;return"undefined"===i?a=`Warning: No message defined for ${t.method}.`:"function"===i&&(a=a.call(this,t.parameters)),a}formatTplAndAdd(e,t,a){let i=this.defaultMessage(e,t);this.errorList.push({param:e,msg:i,value:a})}checkParam(e,t,a){this.scope=a;const i=a.detail.value[e]||"";for(let s in t)if(this.isValidMethod(s)){const a={method:s,parameters:t[s]},r=this.methods[s].valid(i,a.parameters);if("dependency-mismatch"===r)continue;if(this.setValue(e,s,r,i),!r){this.formatTplAndAdd(e,a,i);break}}}setView(e){this.form[e]={$name:e,$valid:!0,$invalid:!1,$error:{},$success:{},$viewValue:""}}setValue(e,t,a,i){const s=this.form[e];s.$valid=a,s.$invalid=!a,s.$error[t]=!a,s.$success[t]=a,s.$viewValue=i}checkForm(e){this.__initData();for(let t in this.rules)this.setView(t),this.checkParam(t,this.rules[t],e);return this.valid()}valid(){return 0===this.size()}size(){return this.errorList.length}validationErrors(){return this.errorList}}var c={weixin(e,t){uni.getUserProfile?uni.getUserProfile({lang:"zh_CN",desc:"用于登陆",success:function(a){uni.login({provider:"weixin",success:function(i){let s={code:i.code,type:t.logintype,userInfo:JSON.stringify(a.userInfo)};e.$http.post(t.loginurl,s).then((a=>{200==a.code&&(e.setData({userInfo:a.data}),e.$session.setUser(a.data)),e[t.callback]&&e[t.callback](a)}))},fail:function(){wx.showModal({title:"获取用户信息",content:"请允许授权以便为您提供给服务",success:function(a){a.confirm&&e.navigateTo(t)}})}})},fail:function(e){wx.showModal({title:"友情提示",content:"已拒绝小程序获取信息",showCancel:!1})}}):uni.showToast({title:"登录失败，请在小程序上登录",icon:"none"})}},d={async pay(e){let t=getApp().globalData.currentPage,a=t.$session;if(!(a.getToken()&&a.getUser().openid||e.openid))return void t.showToast("请先登录");if(!e.total)return void t.showToast("请配置价格参数total");let i=await t.$http.post(e.url||"/api/wepay/order",{total:e.total,body:e.body,openid:e.openid||a.getUser().openid},{},"json");200==i.code?this[e.paytype]?this[e.paytype](Object.assign(i,e)):t.showToast("请使用微信打开"):t.showToast(i.msg)},weixin(e={}){uni.requestPayment({provider:"wxpay",timeStamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:t=>{e.success&&"function"==typeof e.success?e.success(t):n("log","at common/Pay.js:47","配置支付回调成功方法")},fail:t=>{e.fail&&"function"==typeof e.fail?e.fail(t):n("log","at common/Pay.js:54","配置支付回调失败方法")}})}};const u=(e,t)=>new l(e,t);function g(e){for(let t in e){const a=/([\w$]+)|\[(:\d)\]/g,i=t.match(a);let s=this;for(let e=0;e<i.length-1;e++){s=s[i[e]]}s[i[i.length-1]]=e[t]}}var m=[];function p(e){let t=e.currentTarget?e.currentTarget.dataset:e,{id:a,type:i}=t,s=this;if(e.currentTarget){if(m[i])return;m[i]=!0,setTimeout((()=>{m[i]=!1}),500)}if("openmodal"==i)s[a]="show";else if("closemodal"==i)s[a]="";else if("page"==i||"inner"==i||"href"==i)s.$tools.navigateTo(t.url,t);else if("submit"==i)w("将执行表单提交动作");else if("reset"==i)w("将执行表单重置动作");else if("tip"==i)w(t.tip);else if("confirm"==i)uni.showModal({title:"提示",content:t.tip,showCancel:!1});else if("daohang"==i)uni.openLocation({latitude:Number(t.lat),longitude:Number(t.lng),address:t.address,success:function(){n("log","at common/Page.js:67","success")}});else if("phone"==i)s.$tools.makePhoneCall(e);else if("previewImage"==i||"preview"==i)uni.previewImage({current:s.$tools.renderImage(t.img),urls:[s.$tools.renderImage(t.img)]});else if("copy"==i)uni.setClipboardData({data:t.copy,showToast:!1,success:function(){w(t.tip||"复制成功","none")}});else if("xcx"==i)uni.navigateToMiniProgram({appId:t.appid,path:t.path,success(e){}});else if("function"==typeof s[i])s[i](t);else if("login"==i){let e=t.logintype;c[e]?c[e](s,t):w(i+"登录有待实现")}else"pay"==i?d.pay(t):w(i+"类型有待实现")}function f(e,t="提示",a=!0){return new Promise((i=>{uni.showModal({title:t,content:e,showCancel:a,success:function(e){e.confirm?i(!0):e.cancel&&i(!1)}})}))}function w(e,t){uni.showToast({title:e,icon:t||"none"})}function h(e,t,a){if(null!=t&&e[t]&&e[t].children&&e[t].children){let i=e[t].children;if(null==a)return null!=i&&i.length>0?i.map((e=>e.label)):[];{if(null==i[a])return[];let e=i[a].children;return null!=e&&e.length>0?e.map((e=>e.text)):[]}}return[]}function y(e,t){const a=t.match(/([\w$]+)|\[(:\d)\]/g);let i=e;for(let s=0;s<a.length-1;s++){i=i[a[s]]}return i[a[a.length-1]]}function v(e,t,a,i){return new Promise((s=>{if(!i)return w("请配置上传地址"),void s();uni.chooseImage({sizeType:["original","compressed"],sourceType:["album","camera"],success:function(r){let o=r.tempFilePaths;for(let n=0;n<o.length;n++)uni.uploadFile({url:e.$http.setUrl(i),filePath:o[0],name:"file",header:{Authorization:e.$session.getToken()||""},success(i){let s=e.$tools.fromJson(i.data),r="";s.url&&(r=e.$tools.renderImage(s.url)),s.data&&e.$tools.isObject(s.data)&&s.data.url&&(r=e.$tools.renderImage(s.data.url));let o=y(e,a).concat(r);e.setData({[a]:o,[t]:(o||[]).join(",").replace(/^[]/,"")})},complete(){n==o.length-1&&s()}})}})}))}function x(e){if(null!==e&&"object"==typeof e)for(let t in e)e[t]=decodeURIComponent(e[t]);return e}function N(e){if(this.$session.getUser()&&(e.userInfo=this.$session.getUser()),this.$session.getValue("redirect_page")){let e=this.$session.getValue("redirect_page");this.$session.setValue("redirect_page",null),this.$tools.navigateTo(e.url,e)}getApp().globalData.currentPage=e}var V="http://127.0.0.1:9999";class E{constructor(){Object.assign(this,{$$basePath:V})}getFilenameExt(e){const t=e.name.split(".");return t[t.length-1]}getCurrentDate(){const e=new Date;return[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-")}getCurrentTime(){const e=new Date;return[e.getHours(),e.getMinutes()].join(":")}rand(e,t){return Math.floor(Math.random()*(t-e+1)+e)}randString(e){let t="",a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(e=e||1;e--;)t+=a.charAt(this.rand(0,a.length-1));return t}randFilename(e){return this.randString(this.rand(10,100))+Date.parse(new Date)+"."+this.getFilenameExt(e)}isString(e){return"string"==typeof e}isFunction(e){return"function"===this.type(e)}isArray(e){return Array.isArray(e)}isObject(e){return null!==e&&"object"==typeof e}isNumber(e){return"number"==typeof e}isDate(e){return"[object Date]"===this.type(e)}isRegExp(e){return"[object RegExp]"===this.type(e)}isFile(e){return"[object File]"===this.type(e)}isFormData(e){return"[object FormData]"===this.type(e)}isBlob(e){return"[object Blob]"===this.type(e)}isBoolean(e){return"boolean"==typeof e}isPromiseLike(e){return e&&this.isFunction(e.then)}isTypedArray(e){return e&&this.isNumber(e.length)&&/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/.test(this.type(e))}isArrayBuffer(e){return"[object ArrayBuffer]"===this.type(e)}isDefined(e){return void 0!==e}isUndefined(e){return void 0===e}isNull(e){return null===e}isFinite(e){return"number"==typeof e&&isFinite(e)}isNaN(e){return this.isNumber(e)&&e!=+e}isError(e){return"[object Error]"===this.type(e)}trim(e){return this.isString(e)?e.trim():e}escapeForRegexp(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}makeMap(e){let t={},a=e.split(",");for(let i=0;i<a.length;i++)t[a[i]]=!0;return t}includes(e,t){return-1!=Array.prototype.indexOf.call(e,t)}arrayRemove(e,t){let a=e.indexOf(t);return a>=0&&e.splice(a,1),a}addDateMinutes(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t||0),e}toJson(e,t){if(!this.isUndefined(e))return this.isNumber(t)||(t=t?2:null),JSON.stringify(e,null,t)}fromJson(e){return this.isString(e)?JSON.parse(decodeURIComponent(e).replace(new RegExp("&quot;","gm"),'"')):e}extend(){let e,t,a,i,s,r,o=arguments[0]||{},n=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[n]||{},n++),"object"==typeof o||this.isFunction(o)||(o={}),n===l&&(o=this,n--);n<l;n++)if(null!=(s=arguments[n]))for(i in s)e=o[i],a=s[i],o!==a&&(c&&a&&(this.isPlainObject(a)||(t=this.isArray(a)))?(t?(t=!1,r=e&&this.isArray(e)?e:[]):r=e&&this.isPlainObject(e)?e:{},o[i]=this.extend(c,r,a)):void 0!==a&&(o[i]=a));return o}isPlainObject(e){let t,a,i=Object.getPrototypeOf,s={}.hasOwnProperty,r=s.toString,o=r.call(Object);return!(!e||"[object Object]"!==this.type(e))&&(t=i(e),!t||(a=s.call(t,"constructor")&&t.constructor,"function"==typeof a&&r.call(a)===o))}isEmptyObject(e){for(let t in e)return!1;return!0}type(e){const t=Object.prototype.toString;return null==e?e+"":"object"==typeof e||"function"==typeof e?t.call(e)||"object":typeof e}merge(...e){return Object.assign(...e)}clone(e){if("object"!=typeof e||!e)return e;let t={};for(let a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}getUrlParams(e){var t={},a=e.indexOf("?");e.indexOf("#");var i,s,r,o=e.substr(a+1);if(o)for(r=(i=o.split("&")).length;r--;)t[(s=i[r].split("="))[0]]=decodeURIComponent(s[1]).replace(/\+/g," ");return t}getUrlParam(e,t){return this.getUrlParams(e)[t]}omit(e,t){let a=this.clone(e);return t.forEach((e=>{delete a[e]})),a}pluck(e,t){return"object"!=typeof e||0===e.length?[]:t?e.map((e=>e[t])):e}serializeValue(e){return this.isObject(e)?this.isDate(e)?e.toISOString():this.toJson(e):e}encodeUriQuery(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}paramSerializer(e){if(!e)return"";let t=this,a=[];for(let i in e){const s=e[i];if(null===s||t.isUndefined(s))return;t.isArray(s)?s.forEach((function(e){a.push(t.encodeUriQuery(i)+"="+t.encodeUriQuery(t.serializeValue(e)))})):a.push(t.encodeUriQuery(i)+"="+t.encodeUriQuery(t.serializeValue(s)))}return a.join("&")}buildUrl(e,t){const a=this.paramSerializer(t);return a.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+a),e}guid(e=32,t=!0,a=null){let i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(a=a||i.length,e)for(let r=0;r<e;r++)s[r]=i[0|Math.random()*a];else{let e;s[8]=s[13]=s[18]=s[23]="-",s[14]="4";for(let t=0;t<36;t++)s[t]||(e=0|16*Math.random(),s[t]=i[19==t?3&e|8:e])}return t?(s.shift(),"u"+s.join("")):s.join("")}getRect(e,t){return new Promise((a=>{uni.createSelectorQuery().in(this)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&a(e),!t&&e&&a(e)})).exec()}))}renderUrl(e,t){return e&&""!=e||(e=t),e.indexOf("__weui-popup")>0||e.startsWith("tel:")||e.startsWith("http://")||e.startsWith("https://")||0!=e.indexOf("/pages/"+e)&&(e="/pages/"+e),e}renderImage(e){return e?(-1!==e.indexOf("http")||(e=`${this.$$basePath}${e}`).indexOf("www.diygw.com/upload")>0&&(e=e.replace("www.diygw.com","lib.diygw.com")),e):""}makePhoneCall(e){let t="";e.currentTarget?t=e.currentTarget.dataset.phone:t=this.isObject(e)&&e.phone?e.phone:e;-1!==t.indexOf("tel:")&&(t=t.substr(4)),uni.makePhoneCall({phoneNumber:t})}navigateTo(e,t){if(e.startsWith("tel:"))this.makePhoneCall(e);else{if(e.startsWith("http://")||e.startsWith("https://")){const e=this.buildUrl("/pages/webview",t);return new Promise(((t,a)=>{uni.navigateTo({url:e,success:e=>t(e),fail:e=>a(e)})}))}if(e.startsWith("pages/")&&(e="/"+e),e.startsWith("/pages/")||(e="/pages/"+e),-1!=getApp().globalData.tabBar.indexOf(e))uni.switchTab({url:e});else if(t&&t.redirect){const a=this.buildUrl(e,t);uni.redirectTo({url:a,success:e=>{n("log","at common/Tools.js:733","success"+e)},fail:e=>{n("log","at common/Tools.js:736","error"+e)}})}else{const a=this.buildUrl(e,t);uni.navigateTo({url:a,success:e=>{n("log","at common/Tools.js:744","success"+e)},fail:e=>{n("log","at common/Tools.js:747","error"+e),e&&e.errMsg&&e.errMsg.indexOf("limit")>0&&uni.redirectTo({url:a,success:e=>{n("log","at common/Tools.js:752","success"+e)},fail:e=>{n("log","at common/Tools.js:755","error"+e)}})}})}}}padZero(e,t=2){let a=`${e}`;for(;a.length<t;)a=`0${a}`;return a}parseTimeData(e){const t=1e3,a=6e4,i=36e5,s=24*i;return{days:Math.floor(e/s),hours:Math.floor(e%s/i),minutes:Math.floor(e%i/a),seconds:Math.floor(e%a/t),milliseconds:Math.floor(e%t)}}parseFormat(e,t){let{days:a,hours:i,minutes:s,seconds:r,milliseconds:o}=t;return-1===e.indexOf("DD")?i+=24*a:e=e.replace("DD",this.padZero(a)),-1===e.indexOf("HH")?s+=60*i:e=e.replace("HH",this.padZero(i)),-1===e.indexOf("mm")?r+=60*s:e=e.replace("mm",this.padZero(s)),-1===e.indexOf("ss")?o+=1e3*r:e=e.replace("ss",this.padZero(r)),e.replace("SSS",this.padZero(o,3))}isSameSecond(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}addUnit(e="auto",t="rpx"){return this.isNumber(e)?`${e}${t}`:e}getParent(e,t){for(;e;){if(!e.$options||e.$options.name===t)return e;{e=e.$parent;let a=this.getParent(e,t);if(a)return a}}return!1}os(){return uni.getSystemInfoSync().platform}sys(){return uni.getSystemInfoSync()}}var b="user_session_diygw_com",T="redirect_session_diygw_com",_={getRedirecturl:()=>uni.getStorageSync(T)||null,setRedirecturl(e){uni.setStorageSync(T,e)},getUser:()=>uni.getStorageSync(b)||null,setUser(e){uni.setStorageSync(b,e)},clearUser(){uni.removeStorageSync(b)},getToken(){var e=this.getUser();return e?e.token:null},getOpenId(){var e=this.getUser();return e?e.openid:null},setValue(e,t){uni.setStorageSync(e,t)},getValue:e=>uni.getStorageSync(e)||null};class $ extends class{constructor(){Object.assign(this,{$$basePath:V}),this.__init()}__init(){this.__initDefaults(),this.__initMethods()}__initInterceptor(){}__initDefaults(){this.suffix="",this.instanceSource={method:["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"]}}__initMethods(){for(let e in this.instanceSource)this.instanceSource[e].forEach(((e,t)=>{this[e.toLowerCase()+this.suffix]=(...t)=>this.__defaultRequest(e,...t)}))}__defaultRequest(e="",t="",a={},i={},s="json"){const r=Object.assign({},this.setHeaders(),i),o=this.setUrl(t,a);a.url&&(a.url=this.setUrl(a.url,a));const n=(e,t)=>{for(let a=0,i=t.length;a<i;){let i=t[a++],s=t[a++];e=e.then(i,s)}return e},l={url:o,data:a,header:r,method:e,dataType:s};let c=[],d=[],u=this.setInterceptors(),g=this.__resolve(l);return u.forEach(((e,t)=>{(e.request||e.requestError)&&c.push(e.request,e.requestError),(e.response||e.responseError)&&d.unshift(e.response,e.responseError)})),g=n(g,c),g=g.then(this.__http),g=n(g,d),g=g.then((e=>e.data),(e=>e)),g}__http(e){return new Promise(((t,a)=>{e.success=e=>t(e),e.fail=e=>a(e),uni.request(e)}))}__resolve(e){return new Promise(((t,a)=>{t(e)}))}__reject(e){return new Promise(((t,a)=>{a(e)}))}getPathValue(e,t){for(var a=t.split(".");a.length;)e=e[a.shift()];return e}getRestUrl(e,t){return t&&null!==t&&"object"==typeof t?e=(e=e.replace(/\{\{(.+?)\}\}/g,((e,a)=>{let i=a.trim();return this.getPathValue(t,i)}))).replace(/\{(.+?)\}/g,((e,a)=>{let i=a.trim();return this.getPathValue(t,i)})):e}setUrl(e,t){let a=/^http(s)?:\/\/.*/i.test(e);return e=this.getRestUrl(e,t),a?e:e.startsWith("/")||this.$$basePath.endsWith("/")?`${this.$$basePath}${this.$$prefix}${e}`:`${this.$$basePath}/${this.$$prefix}${e}`}setHeaders(){return{"Content-type":"application/x-www-form-urlencoded"}}setInterceptors(){return this.interceptors=[{request:e=>(e.header=e.header||{},e.requestTimestamp=(new Date).getTime(),_.getToken()&&(e.header.Authorization=_.getToken()),uni.showLoading({title:e.data.loadmsg||"加载中..."}),e.data.redirecturl&&(_.setRedirecturl(e.data.redirecturl),delete e.data.redirecturl),delete e.data.loadmsg,e),requestError:e=>(uni.hideToast(),e),response:e=>(e.responseTimestamp=(new Date).getTime(),uni.hideLoading(),401!=e.data.code&&401!=e.data.status||(_.clearUser(),uni.reLaunch({url:getApp().globalData.homePage})),e),responseError:e=>(uni.hideLoading(),e)}],this.__initInterceptor(),this.interceptors}}{constructor(){super(),this.$$prefix=""}__initInterceptor(){}postData(e,t){return this.post(t||this.$$path.data,e)}getData(e,t){return this.get(t||this.$$path.data,e)}saveData(e,t){return this.post(t||this.$$path.save,e)}delData(e,t){return this.post(t||this.$$path.del,e)}}const{app:k,Vuex:C,Pinia:z}=function(){const t=e.createVueApp(o);return t.config.globalProperties.$tools=new E,t.config.globalProperties.$http=new $,t.config.globalProperties.$session=_,uni.getSystemInfo({success:function(e){t.config.globalProperties.StatusBar=e.statusBarHeight,"android"==e.platform?t.config.globalProperties.CustomBar=e.statusBarHeight+50:t.config.globalProperties.CustomBar=e.statusBarHeight+45}}),t.mixin({methods:{setCurrentPage:N,Validate:u,setData:g,navigateTo:p,showModal:f,showToast:w,getPickerChildren:h,uploadImage:v,getOption:x}}),{app:t}}();uni.Vuex=C,uni.Pinia=z,k.provide("__globalStyles",__uniConfig.styles),k._component.mpType="app",k._component.render=()=>{},k.mount("#app")}(Vue);
