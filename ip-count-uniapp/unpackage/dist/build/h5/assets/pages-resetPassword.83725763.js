import{s as e,r as t,o as a,c as s,w as l,b as o,d as i,t as d,i as c,e as r,f as u,I as n,h as m}from"./index.9d56859b.js";import{_ as f,a as p,b as g,c as y}from"./icon2_QQ.7d2b315b.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";var h=w({data:()=>({userInfo:{},globalOption:{},globalData:{},userNameFocus:!1,userName:"",passwordFocus:!1,password:"",checkCodeFocus:!1,checkCode:"",codeButtonName:"发送验证码",count:60,codeDisabled:!0,emailCodeFlag:!1}),onShow(){this.setCurrentPage(this)},onLoad(e){this.setCurrentPage(this),e&&this.setData({globalOption:this.getOption(e)}),this.init()},methods:{async init(){},emailCodeApi(){/^\d{5,12}@[qQ][qQ]\.(com|cn)$/.test(this.userName)?0!=this.codeDisabled?this.$http.post("http://api.9api.top:9999/utils/emailCode",{email:this.userName},{sign:"4503fcdaae0b69bbd9c98b3d5e301ef7"}).then((t=>{if(0===t.code){e({title:t.msg,icon:"success",duration:1e3});let a=setInterval((()=>{this.count<1?(this.codeDisabled=!0,this.codeButtonName="发送验证码",this.count=60,clearInterval(a)):(this.codeDisabled=!1,this.codeButtonName=this.count--+"s后重发")}),1e3)}else e({title:t.msg,icon:"error",duration:1500})})):e({title:"倒计时中!",icon:"error",duration:1500}):e({title:"请输入正确QQ邮箱!",icon:"error",duration:1500})},resetPasswordApi(){if(!/^\d{5,12}@[qQ][qQ]\.(com|cn)$/.test(this.userName))return void e({title:"请输入正确QQ邮箱!",icon:"error",duration:1500});if(!/^\w{6,12}$/.test(this.password))return void e({title:"密码长度在6-12之间!",icon:"error",duration:1500});/^\w{4}$/.test(this.checkCode)?this.$http.post("http://api.9api.top:9999/user/resetPassword",{userName:this.userName,password:this.password,checkCode:this.checkCode},{"Content-type":"application/json",sign:"4503fcdaae0b69bbd9c98b3d5e301ef7"}).then((a=>{0===a.code?(e({title:a.msg,icon:"success",duration:1e3}),setTimeout((function(){t({url:"/pages/login"})}),2e3)):e({title:a.msg,icon:"error",duration:1500})})):e({title:"请输入正确验证码!",icon:"error",duration:1500})}}},[["render",function(e,t,w,h,x,b){const _=c,C=r,v=u,z=n,k=m;return a(),s(C,{class:"container"},{default:l((()=>[o(C,{class:"flex diygw-col-24 flex-direction-column justify-center items-center flex-nowrap flex-clz"},{default:l((()=>[o(C,{class:"flex diygw-col-0 avatar-clz"},{default:l((()=>[o(C,{class:"diygw-avatar lg radius diygw-shadow bg-none"},{default:l((()=>[o(_,{mode:"aspectFit",class:"diygw-avatar-img radius",src:f})])),_:1})])),_:1})])),_:1}),o(C,{class:"diygw-col-24 logintitle-clz diygw-text-lg text-purple"},{default:l((()=>[i(" 重置密码 ")])),_:1}),o(C,{class:"diygw-form-item diygw-form-item-small diygw-col-24 userName-clz"},{default:l((()=>[o(C,{class:"input"},{default:l((()=>[o(v,{class:"diy-icon-my",style:{color:"#304ffe"}}),o(z,{class:"flex1",focus:x.userNameFocus,name:"userName","comfirm-type":"done",type:"text",modelValue:x.userName,"onUpdate:modelValue":t[0]||(t[0]=e=>x.userName=e),placeholder:"请输入QQ邮箱"},null,8,["focus","modelValue"])])),_:1})])),_:1}),o(C,{class:"diygw-form-item diygw-form-item-small diygw-col-24 password-clz"},{default:l((()=>[o(C,{class:"input"},{default:l((()=>[o(v,{class:"diy-icon-my",style:{color:"#304ffe"}}),o(z,{class:"flex1",focus:x.passwordFocus,name:"password","comfirm-type":"done",type:"text",modelValue:x.password,"onUpdate:modelValue":t[1]||(t[1]=e=>x.password=e),placeholder:"请输入新密码"},null,8,["focus","modelValue"])])),_:1})])),_:1}),o(C,{class:"flex flex-wrap diygw-col-24 flex4-clz"},{default:l((()=>[o(C,{class:"diygw-form-item diygw-form-item-small diygw-col-15 checkCode-clz"},{default:l((()=>[o(C,{class:"input"},{default:l((()=>[o(v,{class:"diy-icon-my",style:{color:"#304ffe"}}),o(z,{class:"flex1",focus:x.checkCodeFocus,name:"checkCode","comfirm-type":"done",type:"text",modelValue:x.checkCode,"onUpdate:modelValue":t[2]||(t[2]=e=>x.checkCode=e),placeholder:"请输入验证码"},null,8,["focus","modelValue"])])),_:1})])),_:1}),o(C,{class:"flex diygw-col-9 button1-clz"},{default:l((()=>[o(k,{onClick:e.navigateTo,"data-type":"emailCodeApi",class:"diygw-btn gradual-purple md radius margin-xs button1-button-clz"},{default:l((()=>[i(d(x.codeButtonName),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),o(C,{class:"flex diygw-col-24 button-clz"},{default:l((()=>[o(k,{onClick:e.navigateTo,"data-type":"resetPasswordApi",class:"diygw-btn gradual-purple md radius flex-sub margin-xs button-button-clz"},{default:l((()=>[i("点击修改")])),_:1},8,["onClick"])])),_:1}),o(C,{class:"flex flex-wrap diygw-col-24 justify-between flex1-clz"},{default:l((()=>[o(C,{onClick:e.navigateTo,"data-type":"page","data-url":"/pages/login",class:"diygw-col-0 text-clz text-purple"},{default:l((()=>[i(" 登录账号 ")])),_:1},8,["onClick"]),o(C,{onClick:e.navigateTo,"data-type":"page","data-url":"/pages/register",class:"diygw-col-0 text1-clz text-purple"},{default:l((()=>[i(" 注册账户 ")])),_:1},8,["onClick"])])),_:1}),o(C,{class:"flex flex-wrap diygw-col-24 justify-center items-center flex2-clz"},{default:l((()=>[o(C,{class:"flex diygw-col-0 line-clz"},{default:l((()=>[o(C,{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})])),_:1}),o(C,{class:"diygw-col-0 text2-clz text-grey"},{default:l((()=>[i(" 第三方授权登录 ")])),_:1}),o(C,{class:"flex diygw-col-0 line1-clz"},{default:l((()=>[o(C,{class:"diygw-pzx",style:{"border-bottom":"1px solid #eee"}})])),_:1})])),_:1}),o(C,{class:"flex diygw-col-24 justify-center"},{default:l((()=>[o(C,{class:"diygw-avatar md margin-md radius bg-none"},{default:l((()=>[o(_,{mode:"aspectFit",class:"diygw-avatar-img radius",src:p})])),_:1}),o(C,{class:"diygw-avatar md margin-md radius bg-none"},{default:l((()=>[o(_,{mode:"aspectFit",class:"diygw-avatar-img radius",src:g})])),_:1}),o(C,{class:"diygw-avatar md margin-md radius bg-none"},{default:l((()=>[o(_,{mode:"aspectFit",class:"diygw-avatar-img radius",src:y})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-19df8c8d"]]);export{h as default};
