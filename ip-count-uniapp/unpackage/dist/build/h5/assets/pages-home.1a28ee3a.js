import{m as t,u as e,o as i,c as a,w as l,b as s,n as o,p as n,q as c,v as d,x as r,i as p,f,e as u,j as g,g as y,s as h,r as m,y as x,k as w,d as k,z as _,A as b,F as S,I as C,B as A,h as I,t as z}from"./index.9d56859b.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";import{r as N}from"./uni-app.es.8884db00.js";import{_ as T}from"./diy-sticky.f962439d.js";var P=v({name:"diy-noticebar",props:{leftImg:{type:String,default:""},leftIcon:{type:String,default:""},autoplay:{type:Boolean,default:!0},color:{type:String,default:""},bgColor:{type:String,default:""},show:{type:Boolean,default:!0},vertical:{type:Boolean,default:!1},duration:{type:[Number,String],default:2e3},interval:{type:[Number,String],default:2e3},fontSize:{type:[Number,String],default:28},speed:{type:[Number,String],default:160},playState:{type:String,default:"play"},padding:{type:[Number,String],default:"18rpx 24rpx"}},data(){return{elClass:this.$tools.guid(),textWidth:0,boxWidth:0,animationDuration:"10s",animationPlayState:"paused",showText:""}},watch:{playState(t){this.animationPlayState="play"==t?"running":"paused"},speed(t){this.initSize()}},computed:{computeColor(){return this.color?this.color:"none"==this.type?"#606266":this.type},textStyle(){let t={};return this.color?t.color=this.color:"none"==this.type&&(t.color="#606266"),t.fontSize=this.fontSize+"rpx",t},computeBgColor(){return this.bgColor?this.bgColor:"none"==this.type?"transparent":void 0}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(!this.vertical){let i=[],a=new Promise(((e,i)=>{t().in(this).select("."+this.elClass).boundingClientRect().exec((t=>{this.textWidth=t[0].width,e()}))}));i.push(a),Promise.all(i).then((()=>{this.animationDuration=this.textWidth/e(this.speed)+"s",this.animationPlayState="paused",setTimeout((()=>{"play"==this.playState&&this.autoplay&&(this.animationPlayState="running")}),10)}))}}}},[["render",function(t,e,g,y,h,m){const x=p,w=f,k=u;return i(),a(k,{class:"diy-notice-bar flex1",style:d({background:m.computeBgColor,padding:g.padding})},{default:l((()=>[s(k,{class:"flex align-center",style:d([m.textStyle])},{default:l((()=>[g.leftImg?(i(),a(x,{key:0,class:"diy-notice-img",src:g.leftImg},null,8,["src"])):o("",!0),g.leftIcon?(i(),a(w,{key:1,class:n(g.leftIcon),color:m.computeColor},null,8,["class","color"])):o("",!0),s(k,{class:"diy-notice-box flex-sub",id:"diy-notice-box"},{default:l((()=>[g.vertical?(i(),a(k,{key:0,class:"diy-notice-swiper flex-sub"},{default:l((()=>[c(t.$slots,"content")])),_:3})):(i(),a(k,{key:1,class:n(["diy-notice-content flex-sub",[h.elClass]]),style:d({animationDuration:h.animationDuration,animationPlayState:h.animationPlayState})},{default:l((()=>[r("div",{class:"diy-notice-text",onClick:e[0]||(e[0]=(...e)=>t.click&&t.click(...e))},[c(t.$slots,"content")])])),_:3},8,["class","style"]))])),_:3})])),_:3},8,["style"])])),_:3},8,["style"])}]]);var j=v({data:()=>({userInfo:{},globalOption:{},globalData:{},appInfo:{},likeStr:""}),onShow(){this.setCurrentPage(this)},onLoad(t){this.setCurrentPage(this),t&&this.setData({globalOption:this.getOption(t)}),this.init()},onPullDownRefresh(){this.appAllInfoApi(),g()},methods:{async init(){this.appAllInfoApi()},appAllInfoApi(t){this.$http.get("http://api.9api.top:9999/app/getAllApp",{},{token:y("token")}).then((t=>{0!=t.code?(h({title:"登录失效,请重新登录!",icon:"error",duration:1500}),setTimeout((function(){m({url:"/pages/login"})}),1e3)):0==t.code&&(this.appInfo=t)}))},appInfoApi(t){x({url:"/pages/appInfo?token="+t})},selectLikeApi(){if(""==this.likeStr)return this.likeStr="",void this.appAllInfoApi();this.$http.get("http://api.9api.top:9999/app/selectLikeAppName?str="+this.likeStr,{},{token:y("token")}).then((t=>{0!=t.code?(h({title:"登录失效,请重新登录!",icon:"error",duration:1500}),setTimeout((function(){m({url:"/pages/login"})}),1e3)):0==t.code&&(0==Object.keys(t.data).length&&(h({title:"没有该项目o!",icon:"error",duration:2e3}),setTimeout((()=>{this.likeStr="",this.appAllInfoApi()}),1e3)),this.appInfo=t)}))},setAppName(){w({title:"请输入项目名称",showCancel:!0,editable:!0,success:t=>{t.confirm&&(""==t.content?h({title:"请输入项目名称",icon:"error",duration:1500}):setTimeout((()=>{this.setAppNotes(t.content)}),250))}})},setAppNotes(t){w({title:"请输入项目备注(可空)",showCancel:!0,editable:!0,success:e=>{e.confirm&&this.$http.post("http://api.9api.top:9999/app/add",{appName:t,notes:e.content},{"Content-type":"application/json",token:y("token"),sign:"dfdsfsdfdsfsdf"}).then((t=>{0===t.code?(h({title:t.msg,icon:"success",duration:1e3}),setTimeout((()=>{this.likeStr="",this.appAllInfoApi()}),1e3)):h({title:t.msg,icon:"error",duration:1500})}))}})},appLongtap(t,e){w({title:"温馨提示",content:`是否需要永久删除 ${e}`,cancelText:"取消",confirmText:"删除",confirmColor:"red",cancelColor:"#000000",success:e=>{e.confirm&&this.$http.get(`http://api.9api.top:9999/app/deleteApp?token=${t}`,{},{token:y("token")}).then((t=>{0!=t.code?h({title:t.msg,icon:"error",duration:1500}):0==t.code&&(h({title:t.msg,icon:"success",duration:1500}),setTimeout((()=>{this.likeStr="",this.appAllInfoApi()}),800))}))}})}}},[["render",function(t,e,o,n,c,d){const r=f,g=C,y=u,h=N(A("diy-noticebar"),P),m=N(A("diy-sticky"),T),x=p,w=I;return i(),a(y,{class:"container"},{default:l((()=>[s(y,{class:"flex flex-wrap diygw-col-24 flex-direction-column"},{default:l((()=>[s(m,{h5NavHeight:"0","offset-top":"0"},{default:l((()=>[s(y,{class:"flex diy-sticky-100 flex-wrap diygw-col-24 flex-direction-column flex25-clz"},{default:l((()=>[s(y,{class:"diygw-col-24 search1-clz"},{default:l((()=>[s(y,{class:"diygw-search"},{default:l((()=>[s(y,{class:"flex1 flex padding-xs solid radius"},{default:l((()=>[s(r,{style:{color:"#555 !important"},class:"diy-icon-search"}),s(g,{class:"flex1",name:"search1",type:"",modelValue:c.likeStr,"onUpdate:modelValue":e[0]||(e[0]=t=>c.likeStr=t),placeholder:"请输入关键字"},null,8,["modelValue"])])),_:1}),s(r,{onClick:e[1]||(e[1]=t=>d.selectLikeApi()),style:{color:"#333 !important"},class:"diy-icon-search margin-left-xs"})])),_:1})])),_:1}),s(y,{class:"flex diygw-col-24 noticebar-clz"},{default:l((()=>[s(h,{class:"flex1 diy-notice-bar",color:"#07c160",bgColor:"#fff",leftIcon:"diy-icon-notification"},{content:l((()=>[s(r,{class:"diy-notice-item"},{default:l((()=>[k(" 本软件免费试用,有问题请反馈 | 温馨提示(长按可删除项目)")])),_:1})])),_:1})])),_:1}),s(y,{class:"clearfix"})])),_:1}),s(y,{class:"clearfix"})])),_:1})])),_:1}),s(y,{class:"flex flex-wrap diygw-col-24 flex-direction-column flex-clz"},{default:l((()=>[(i(!0),_(S,null,b(c.appInfo.data,((t,e)=>(i(),a(y,{key:t.token,onClick:e=>d.appInfoApi(t.token),class:"flex flex-wrap diygw-col-24 justify-center items-center flex4-clz",onLongpress:e=>d.appLongtap(t.token,t.appName)},{default:l((()=>[s(x,{src:"/assets/icon11_gj.ace6141b.png",class:"diygw-image diygw-col-8 image1-clz",style:{height:"75px !important",width:"100%"},mode:"aspectFit"}),s(y,{class:"flex flex-wrap diygw-col-16 flex-direction-column justify-between flex5-clz"},{default:l((()=>[s(y,{class:"diygw-col-24 text6-clz diygw-text-sm"},{default:l((()=>[k(z(t.appName),1)])),_:2},1024),s(y,{class:"diygw-col-0 text7-clz diygw-text-xs"},{default:l((()=>[k(z(t.notes),1)])),_:2},1024),s(y,{class:"flex flex-wrap diygw-col-24 justify-between items-center flex6-clz"},{default:l((()=>[s(y,{class:"diygw-col-0 text7-clz diygw-text-md"},{default:l((()=>[k(" 总IP量: "+z(t.ipCount),1)])),_:2},1024),s(y,{class:"diygw-col-0 text8-clz diygw-text-md"},{default:l((()=>[k(" 总访问量: "+z(t.requestCount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","onLongpress"])))),128))])),_:1}),s(y,{class:"flex diygw-col-24 diygw-bottom"},{default:l((()=>[s(y,{class:"diygw-grid diygw-actions"},{default:l((()=>[s(w,{onClick:t.navigateTo,"data-type":"page","data-url":"/pages/home",class:"diygw-action"},{default:l((()=>[s(y,{class:"diygw-grid-inner"},{default:l((()=>[s(y,{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),s(y,{class:"diygw-grid-title"},{default:l((()=>[k(" 首页 ")])),_:1})])),_:1})])),_:1},8,["onClick"]),s(w,{onClick:t.navigateTo,"data-type":"page","data-url":"/pages/userHome",class:"diygw-action"},{default:l((()=>[s(y,{class:"diygw-grid-inner"},{default:l((()=>[s(y,{class:"diygw-grid-icon diygw-avatar diy-icon-home"}),s(y,{class:"diygw-grid-title"},{default:l((()=>[k(" 个人中心 ")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),s(y,{class:"flex diygw-col-0 right-bottom floatbar-clz",onClick:e[2]||(e[2]=t=>d.setAppName())},{default:l((()=>[s(y,{class:"diygw-grid diygw-actions"},{default:l((()=>[s(w,{class:"diygw-action radius"},{default:l((()=>[s(y,{class:"diygw-grid-inner"},{default:l((()=>[s(y,{class:"diygw-grid-icon diygw-avatar grid-icon-clz"},{default:l((()=>[s(x,{mode:"aspectFit",class:"diygw-avatar-img",src:"/assets/Q0GNKQ9XD8JEG6Y9.ba204724.png"})])),_:1}),s(y,{class:"diygw-grid-title"})])),_:1})])),_:1})])),_:1})])),_:1}),s(y,{class:"clearfix"})])),_:1})}],["__scopeId","data-v-25546a92"]]);export{j as default};
